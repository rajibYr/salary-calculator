<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Salary Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </head>
  <body
    class="bg-gradient-to-r from-blue-50 to-purple-50 flex items-center justify-center min-h-screen"
  >
    <div class="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-2xl">
      <h1 class="text-3xl font-bold text-center text-blue-800 mb-6">
        üí∞ Salary Component Calculator
      </h1>

      <!-- Gross Salary Input -->
      <div class="mb-6">
        <label class="block text-gray-700 font-semibold mb-2"
          >Gross Salary (‚Çπ):</label
        >
        <input
          type="number"
          id="salary"
          placeholder="Enter your gross salary"
          class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <!-- Edit Percentages Button -->
      <button
        id="edit-button"
        class="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all mb-6"
      >
        Edit Percentages
      </button>

      <!-- Toggle Buttons -->
      <div class="mb-6">
        <h2 class="text-xl font-semibold text-gray-700 mb-4">
          Toggle Components:
        </h2>
        <div
          id="toggle-buttons-container"
          class="grid grid-cols-2 md:grid-cols-3 gap-3"
        ></div>
      </div>

      <!-- Results Section -->
      <div id="results" class="hidden">
        <h2 class="text-xl font-semibold text-gray-700 mb-4">
          üìä Salary Breakdown:
        </h2>
        <table class="w-full mb-6">
          <tbody id="salary-breakdown" class="divide-y divide-gray-200"></tbody>
        </table>

        <!-- Net Salary -->
        <div class="bg-blue-600 p-6 rounded-lg text-white text-center">
          <h2 class="text-xl font-semibold mb-2">üíµ Net Salary:</h2>
          <p id="net-salary" class="text-3xl font-bold">‚Çπ0.00</p>
        </div>
      </div>

      <!-- Footer -->
      <footer class="mt-8 text-center text-gray-600">
        <p>Made with ‚ù§Ô∏è by <strong class="text-blue-600">Malay</strong></p>
      </footer>
    </div>

    <script>
      // Default percentages and toggles
      const percentages = {
        basic: 50,
        hra: 20,
        ta: 5,
        da: 10,
        otherAllowances: 15,
        epf: 12,
        esi: 0.75,
        tds: 5,
        professionalTax: 200,
      };

      const enabledComponents = {
        basic: true,
        hra: true,
        ta: true,
        da: true,
        otherAllowances: true,
        epf: true,
        esi: true,
        tds: true,
        professionalTax: true,
      };

      // Render toggle buttons
      function renderToggleButtons() {
        const toggleButtonsContainer = document.getElementById(
          "toggle-buttons-container"
        );
        toggleButtonsContainer.innerHTML = Object.entries(enabledComponents)
          .map(
            ([key, value]) => `
          <button
            class="p-3 rounded-lg font-semibold transition-all ${
              value
                ? "bg-green-500 hover:bg-green-600"
                : "bg-red-500 hover:bg-red-600"
            } text-white"
            onclick="toggleComponent('${key}')"
          >
            ${key.toUpperCase()} ${value ? "‚úÖ" : "‚ùå"}
          </button>
        `
          )
          .join("");
      }

      // Toggle component
      function toggleComponent(key) {
        enabledComponents[key] = !enabledComponents[key];
        renderToggleButtons();
        calculateSalary();
      }

      // Calculate salary
      function calculateSalary() {
        const gross = parseFloat(document.getElementById("salary").value) || 0;

        // Calculate components
        const basic = gross * (percentages.basic / 100);
        const hra = gross * (percentages.hra / 100);
        const ta = gross * (percentages.ta / 100);
        const da = gross * (percentages.da / 100);
        const otherAllowances = gross * (percentages.otherAllowances / 100);

        // Calculate deductions
        const epf = basic * (percentages.epf / 100);
        const esi = gross <= 21000 ? gross * (percentages.esi / 100) : 0;
        const tds = gross * (percentages.tds / 100);
        const professionalTax = percentages.professionalTax;

        // Totals
        const totalAdditions = basic + hra + ta + da + otherAllowances;
        const totalDeductions = epf + esi + tds + professionalTax;
        const netSalary = gross - totalDeductions;

        // Update display
        const salaryBreakdown = document.getElementById("salary-breakdown");
        salaryBreakdown.innerHTML = `
        <tr><td class="p-3 font-semibold">Basic Salary</td><td class="p-3">‚Çπ${basic.toFixed(
          2
        )}</td></tr>
        <tr><td class="p-3 font-semibold">HRA</td><td class="p-3">‚Çπ${hra.toFixed(
          2
        )}</td></tr>
        <tr><td class="p-3 font-semibold">TA</td><td class="p-3">‚Çπ${ta.toFixed(
          2
        )}</td></tr>
        <tr><td class="p-3 font-semibold">DA</td><td class="p-3">‚Çπ${da.toFixed(
          2
        )}</td></tr>
        <tr><td class="p-3 font-semibold">Other Allowances</td><td class="p-3">‚Çπ${otherAllowances.toFixed(
          2
        )}</td></tr>
        <tr class="bg-red-50"><td class="p-3 font-semibold">EPF</td><td class="p-3">- ‚Çπ${epf.toFixed(
          2
        )}</td></tr>
        <tr class="bg-red-50"><td class="p-3 font-semibold">ESI</td><td class="p-3">- ‚Çπ${esi.toFixed(
          2
        )}</td></tr>
        <tr class="bg-red-50"><td class="p-3 font-semibold">TDS</td><td class="p-3">- ‚Çπ${tds.toFixed(
          2
        )}</td></tr>
        <tr class="bg-red-50"><td class="p-3 font-semibold">Professional Tax</td><td class="p-3">- ‚Çπ${professionalTax.toFixed(
          2
        )}</td></tr>
      `;

        document.getElementById(
          "net-salary"
        ).textContent = `‚Çπ${netSalary.toFixed(2)}`;
        document.getElementById("results").classList.remove("hidden");
      }

      // Edit percentages using SweetAlert2
      document.getElementById("edit-button").addEventListener("click", () => {
        Swal.fire({
          title: "Edit Percentages",
          html: `
          <input type="number" id="basic" class="swal2-input" placeholder="Basic (%)" value="${percentages.basic}">
          <input type="number" id="hra" class="swal2-input" placeholder="HRA (%)" value="${percentages.hra}">
          <input type="number" id="ta" class="swal2-input" placeholder="TA (%)" value="${percentages.ta}">
          <input type="number" id="da" class="swal2-input" placeholder="DA (%)" value="${percentages.da}">
          <input type="number" id="otherAllowances" class="swal2-input" placeholder="Other Allowances (%)" value="${percentages.otherAllowances}">
          <input type="number" id="epf" class="swal2-input" placeholder="EPF (%)" value="${percentages.epf}">
          <input type="number" id="esi" class="swal2-input" placeholder="ESI (%)" value="${percentages.esi}">
          <input type="number" id="tds" class="swal2-input" placeholder="TDS (%)" value="${percentages.tds}">
          <input type="number" id="professionalTax" class="swal2-input" placeholder="Professional Tax (‚Çπ)" value="${percentages.professionalTax}">
        `,
          focusConfirm: false,
          preConfirm: () => {
            percentages.basic =
              parseFloat(document.getElementById("basic").value) || 0;
            percentages.hra =
              parseFloat(document.getElementById("hra").value) || 0;
            percentages.ta =
              parseFloat(document.getElementById("ta").value) || 0;
            percentages.da =
              parseFloat(document.getElementById("da").value) || 0;
            percentages.otherAllowances =
              parseFloat(document.getElementById("otherAllowances").value) || 0;
            percentages.epf =
              parseFloat(document.getElementById("epf").value) || 0;
            percentages.esi =
              parseFloat(document.getElementById("esi").value) || 0;
            percentages.tds =
              parseFloat(document.getElementById("tds").value) || 0;
            percentages.professionalTax =
              parseFloat(document.getElementById("professionalTax").value) || 0;
            calculateSalary();
          },
        });
      });

      // Initialize
      renderToggleButtons();
      document
        .getElementById("salary")
        .addEventListener("input", calculateSalary);
    </script>
  </body>
</html>
